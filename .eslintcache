[{"/Users/Remy/Documents/ProjFinal/projfinal/src/App.js":"1","/Users/Remy/Documents/ProjFinal/projfinal/src/utils/eth-utils.js":"2","/Users/Remy/Documents/ProjFinal/projfinal/src/index.js":"3","/Users/Remy/Documents/ProjFinal/projfinal/src/components/Banner.js":"4","/Users/Remy/Documents/ProjFinal/projfinal/src/components/Dapp.js":"5","/Users/Remy/Documents/ProjFinal/projfinal/src/components/Footer.js":"6","/Users/Remy/Documents/ProjFinal/projfinal/src/reportWebVitals.js":"7","/Users/Remy/Documents/ProjFinal/playyyer_www/src/index.js":"8","/Users/Remy/Documents/ProjFinal/playyyer_www/src/components/Banner.js":"9","/Users/Remy/Documents/ProjFinal/playyyer_www/src/utils/eth-utils.js":"10","/Users/Remy/Documents/ProjFinal/playyyer_www/src/components/Footer.js":"11","/Users/Remy/Documents/ProjFinal/playyyer_www/src/App.js":"12","/Users/Remy/Documents/ProjFinal/playyyer_www/src/components/ConnexMetamask.js":"13","/Users/Remy/Documents/ProjFinal/playyyer_www/src/components/Events.js":"14"},{"size":359,"mtime":1606386092311,"results":"15","hashOfConfig":"16"},{"size":1202,"mtime":1606339426542,"results":"17","hashOfConfig":"16"},{"size":645,"mtime":1606315677870,"results":"18","hashOfConfig":"16"},{"size":412,"mtime":1606385941103,"results":"19","hashOfConfig":"16"},{"size":12277,"mtime":1606386452404,"results":"20","hashOfConfig":"16"},{"size":340,"mtime":1606384558210,"results":"21","hashOfConfig":"16"},{"size":362,"mtime":1606315423952,"results":"22","hashOfConfig":"16"},{"size":645,"mtime":1606466663960,"results":"23","hashOfConfig":"24"},{"size":417,"mtime":1606470574061,"results":"25","hashOfConfig":"24"},{"size":1202,"mtime":1606396530615,"results":"26","hashOfConfig":"24"},{"size":340,"mtime":1606396530538,"results":"27","hashOfConfig":"24"},{"size":464,"mtime":1606472260069,"results":"28","hashOfConfig":"24"},{"size":9722,"mtime":1606470620344,"results":"29","hashOfConfig":"24"},{"size":6498,"mtime":1606466663043,"results":"30","hashOfConfig":"24"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1pdivri",{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"37"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"qa0s6h",{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"58","messages":"59","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"60","messages":"61","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Users/Remy/Documents/ProjFinal/projfinal/src/App.js",[],"/Users/Remy/Documents/ProjFinal/projfinal/src/utils/eth-utils.js",[],"/Users/Remy/Documents/ProjFinal/projfinal/src/index.js",[],["62","63"],"/Users/Remy/Documents/ProjFinal/projfinal/src/components/Banner.js",[],"/Users/Remy/Documents/ProjFinal/projfinal/src/components/Dapp.js",["64","65"],"import React, { useEffect, useReducer } from \"react\";\nimport {\n  Heading,\n  Text,\n  Center,\n  VStack,\n  Button,\n  HStack,\n  Box,\n  Badge,\n  List,\n  UnorderedList,\n  ListItem,\n  NumberInput,\n  NumberInputField,\n  NumberInputStepper,\n  NumberIncrementStepper,\n  NumberDecrementStepper,\n} from \"@chakra-ui/core\";\n// https://docs.ethers.io/v5/\nimport { ethers } from \"ethers\";\nimport {\n  accountConnected2MetaMask,\n  sendEtherTransaction,\n} from \"../utils/eth-utils\";\n\n//reducer to update web3 state : check if web3 injected, if connected to MetaMask, get account connected, balance...\nconst web3Reducer = (state, action) => {\n  switch (action.type) {\n    case \"SET_isWeb3\":\n      return { ...state, isWeb3: action.isWeb3 };\n    case \"SET_isEnabled\":\n      return { ...state, isEnabled: action.isEnabled };\n    case \"SET_account\":\n      return { ...state, account: action.account };\n    case \"SET_provider\":\n      return { ...state, provider: action.provider };\n    case \"SET_network\":\n      return { ...state, network: action.network };\n    case \"SET_signer\":\n      return { ...state, signer: action.signer };\n    case \"SET_balance\":\n      return { ...state, balance: action.balance };\n    default:\n      throw new Error(`Unhandled action ${action.type} in web3Reducer`);\n  }\n};\n\nconst initialWeb3State = {\n  isWeb3: false,\n  isEnabled: false,\n  account: ethers.constants.AddressZero,\n  provider: null,\n  signer: null,\n  network: null,\n  balance: \"0\",\n};\n\n//reducer to update specific dapp state: user chooses to connect to MetaMask, amount to buy\nconst dappReducer = (state, action) => {\n  switch (action.type) {\n    case \"SET_isConnecting\":\n      return { ...state, isConnecting: action.isConnecting };\n    case \"SET_buyValue\":\n      return { ...state, buyValue: action.buyValue };\n    default:\n      throw new Error(`Unhandled action ${action.type} in dappReducer`);\n  }\n};\n\n//ICO address receiving ethers and selling tokens with values shown in ethers\nconst initialDappState = {\n  buyValue: \"0\",\n  isConnecting: false,\n  myAddr: \"0x987D87a9bfD550b9A38cBc9249dCAA64307C8E7B\", //Remy account 2\n};\n\nconst fetchReducer = (state, action) => {\n  switch (action.type) {\n    case \"FETCH_INIT\":\n      return { ...state, isLoading: true, isError: false };\n    case \"FETCH_SUCCESS\":\n      return {\n        ...state,\n        isLoading: false,\n        data: action.payload,\n      };\n    case \"FETCH_FAILURE\":\n      return { ...state, isLoading: false, isError: true };\n    case \"SET_QUERY\":\n      return { ...state, query: action.payload };\n    case \"SET_URL\":\n      return { ...state, url: action.payload };\n    default:\n      throw new Error(`Unhandled action ${action.type} in fetchReducer`);\n  }\n};\n\nfunction Dapp() {\n  const [web3State, web3Dispatch] = useReducer(web3Reducer, initialWeb3State);\n  const [dappState, dappDispatch] = useReducer(dappReducer, initialDappState);\n\n  //event handler when clicking to connect to MetaMask\n  const handleConnectButtonClick = () => {\n    if (!web3State.isEnabled)\n      dappDispatch({ type: \"SET_isConnecting\", isConnecting: true });\n  };\n\n  //event handler to change value to buy\n  const handleChangeValue = (currentBuyValue) => {\n    dappDispatch({\n      type: \"SET_buyValue\",\n      buyValue: currentBuyValue,\n    });\n  };\n\n  //event handler to send value for buying tokens\n  const handleBuyButtonClick = async () =>\n    await sendEtherTransaction(web3State.signer, web3State.provider, {\n      to: dappState.myAddr,\n      value: ethers.utils.parseEther(dappState.buyValue),\n    });\n\n  // Check if Web3 is injected only on mount\n  useEffect(() => {\n    if (typeof window.ethereum !== \"undefined\") {\n      web3Dispatch({ type: \"SET_isWeb3\", isWeb3: true });\n    } else {\n      web3Dispatch({ type: \"SET_isWeb3\", isWeb3: false });\n    }\n  }, []);\n\n  // Check if already connected to MetaMask on mount and when isWeb3 from web3State changes value\n  useEffect(() => {\n    const checkIfConnected = async () => {\n      const account = await accountConnected2MetaMask();\n      // if connected set account to connected address, if not: \"\"\n      if (account) {\n        web3Dispatch({ type: \"SET_isEnabled\", isEnabled: true });\n        web3Dispatch({ type: \"SET_account\", account: account });\n      } else {\n        web3Dispatch({ type: \"SET_isEnabled\", isEnabled: false });\n      }\n    };\n    //set isEnabled/account only if web3 is injected (isWeb3 === true)\n    if (web3State.isWeb3) {\n      checkIfConnected();\n    }\n  }, [web3State.isWeb3]);\n\n  //If not connected to MetaMask, user connects by clicking button\n  useEffect(() => {\n    const connect2MetaMask = async () => {\n      try {\n        //MetaMask pop-up to ask for connection (method: \"eth_requestAccounts\"), account is an array with one address in a string\n        const accounts = await window.ethereum.request({\n          method: \"eth_requestAccounts\",\n        });\n        web3Dispatch({ type: \"SET_isEnabled\", isEnabled: true });\n        web3Dispatch({ type: \"SET_account\", account: accounts[0] });\n      } catch (e) {\n        web3Dispatch({ type: \"SET_isEnabled\", isEnabled: false });\n        web3Dispatch({\n          type: \"SET_account\",\n          account: initialWeb3State.account,\n        });\n        console.log(\"connect to MetaMask error :\", e);\n      } finally {\n        dappDispatch({ type: \"SET_isConnecting\", isConnecting: false });\n      }\n    };\n    /*call connect2MetaMask only if web3 injected, not connected already and user\nclicked the button to connect (so set isConnecting to true). If connected set\nisEnabled to true and account, if error set isEnabled to false and account to\ninitial address 0. In any case, success or failure, close the connecting phase\n(similar to loading) and set isConnecting to false.*/\n    if (web3State.isWeb3 && !web3State.isEnabled && dappState.isConnecting) {\n      connect2MetaMask();\n    }\n    //dependency array with variables of if clause\n  }, [web3State.isWeb3, dappState.isConnecting, web3State.isEnabled]);\n\n  // Connect to provider via ethers methods\n  useEffect(() => {\n    const connect2Provider = async () => {\n      try {\n        /*Create a new Web3Provider, which wraps an existing Web3-compatible\n        external Provider (window.ethereum created by MetaMask) and expose it\n        as an ethers.js Provider which can then be used with the rest of the\n        library.*/\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\n        web3Dispatch({ type: \"SET_provider\", provider });\n        console.log(provider);\n\n        /*Returns a JsonRpcSigner which is managed by this Ethereum node and has\n        inherits from Signer sendTransaction method */\n        const signer = provider.getSigner();\n        web3Dispatch({ type: \"SET_signer\", signer });\n        console.log(signer);\n\n        //Returns the Network object this Provider is connected to\n        const network = await provider.getNetwork();\n        web3Dispatch({ type: \"SET_network\", network });\n        console.log(network);\n\n        // Returns the balance of address in wei as a Big Number\n        const _balance = await provider.getBalance(web3State.account);\n        /*parseEther( etherString ) and formatEther( wei ) are used to\n        convert between string representations (in Ether), which are displayed to or\n        entered by the user and Big Number representations which can have\n        mathematical operations handled safely. */\n        const balance = ethers.utils.formatEther(_balance);\n        web3Dispatch({ type: \"SET_balance\", balance });\n        console.log(_balance);\n      } catch (e) {\n        web3Dispatch({\n          type: \"SET_network\",\n          network: initialWeb3State.network,\n        });\n        web3Dispatch({\n          type: \"SET_balance\",\n          balance: initialWeb3State.balance,\n        });\n        console.log(\"connect to provider error :\", e);\n      }\n    };\n    //connect to provider only if connected to MetaMask and account is not address 0\n    if (\n      web3State.isEnabled &&\n      web3State.account !== ethers.constants.AddressZero\n    ) {\n      connect2Provider();\n    }\n  }, [web3State.isEnabled, web3State.account]);\n\n  return (\n    <>\n    <Center>\n        <VStack>\n          <Heading mb={5} mt={10}>\n            PLAYYYER\n          </Heading>\n          <Box bg=\"WhiteSmoke\" w=\"100%\" p={4}>\n          {!web3State.isWeb3 && <Text mb=\"1rem\">Merci d'installer MetaMask pour vous connecter et vous inscrire aux évènements</Text>}\n\n          {web3State.isWeb3 && (\n            <Box mb={3} alignItems=\"baseline\">\n              Statut:{\" \"}\n              {web3State.isEnabled ? (\n                <Badge colorScheme=\"green\">connecté</Badge>\n              ) : (\n                <Badge colorScheme=\"red\">déconnecté</Badge>\n              )}\n            </Box>\n          )}\n\n          {web3State.isEnabled &&\n            web3State.network !== null &&\n            web3State.account !== ethers.constants.AddressZero && (\n              <>\n                <UnorderedList>\n                  <ListItem mb={3}>\n                    Votre compte Metamask: <Text as=\"b\">{web3State.account}</Text>\n                  </ListItem>\n                  <ListItem mb={3}>\n                    Votre solde: <Text as=\"b\">{web3State.balance}</Text>\n                  </ListItem>\n                  <ListItem mb={3}>\n                    Vous etes connecter au réseau{\" \"}\n                    <Text as=\"b\">{web3State.network.name}</Text>\n                  </ListItem>\n                </UnorderedList>\n              </>\n            )}\n          {!web3State.isEnabled && (\n            <Center><Button colorScheme=\"blue\" onClick={handleConnectButtonClick}>Ce connecter</Button></Center>\n          )}\n          </Box>\n          <Box p=\"6\" borderWidth=\"1px\" borderRadius=\"lg\">\n            <VStack>\n            <HStack>\n              <Text fontSize=\"xl\">Evènement 1</Text>\n              <NumberInput\n              value={dappState.buyValue}\n              defaultValue={initialDappState.buyValue}\n              step={1}\n              min={0}\n              max={web3State.balance}\n              onChange={handleChangeValue}\n              >\n                    <NumberInputField />\n                    <NumberInputStepper>\n                      <NumberIncrementStepper />\n                      <NumberDecrementStepper />\n                    </NumberInputStepper>\n                  </NumberInput>\n\n                  <Button colorScheme=\"blue\" onClick={handleBuyButtonClick}>\n                    Achetez un token / place pour {dappState.buyValue} ETH\n                  </Button>\n                </HStack>\n                <HStack>\n              <Text fontSize=\"xl\">Evènement 2</Text>\n              <NumberInput\n              value={dappState.buyValue}\n              defaultValue={initialDappState.buyValue}\n              step={1}\n              min={0}\n              max={web3State.balance}\n              onChange={handleChangeValue}\n              >\n                    <NumberInputField />\n                    <NumberInputStepper>\n                      <NumberIncrementStepper />\n                      <NumberDecrementStepper />\n                    </NumberInputStepper>\n                  </NumberInput>\n\n                  <Button colorScheme=\"blue\" onClick={handleBuyButtonClick}>\n                    Achetez un token / place pour {dappState.buyValue} ETH\n                  </Button>\n                </HStack>\n                <HStack>\n              <Text fontSize=\"xl\">Evènement 3</Text>\n              <NumberInput\n              value={dappState.buyValue}\n              defaultValue={initialDappState.buyValue}\n              step={1}\n              min={0}\n              max={web3State.balance}\n              onChange={handleChangeValue}\n              >\n                    <NumberInputField />\n                    <NumberInputStepper>\n                      <NumberIncrementStepper />\n                      <NumberDecrementStepper />\n                    </NumberInputStepper>\n                  </NumberInput>\n\n                  <Button colorScheme=\"blue\" onClick={handleBuyButtonClick}>\n                    Achetez un token / place pour {dappState.buyValue} ETH\n                  </Button>\n                </HStack>\n            </VStack>\n          </Box>\n          </VStack>\n          </Center>\n    </>\n  );\n}\n\nexport default Dapp;","/Users/Remy/Documents/ProjFinal/projfinal/src/components/Footer.js",[],"/Users/Remy/Documents/ProjFinal/projfinal/src/reportWebVitals.js",[],"/Users/Remy/Documents/ProjFinal/playyyer_www/src/index.js",[],"/Users/Remy/Documents/ProjFinal/playyyer_www/src/components/Banner.js",[],"/Users/Remy/Documents/ProjFinal/playyyer_www/src/utils/eth-utils.js",[],"/Users/Remy/Documents/ProjFinal/playyyer_www/src/components/Footer.js",[],["66","67"],"/Users/Remy/Documents/ProjFinal/playyyer_www/src/App.js",["68"],"/Users/Remy/Documents/ProjFinal/playyyer_www/src/components/ConnexMetamask.js",["69","70","71"],"/Users/Remy/Documents/ProjFinal/playyyer_www/src/components/Events.js",["72"],{"ruleId":"73","replacedBy":"74"},{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","severity":1,"message":"78","line":11,"column":3,"nodeType":"79","messageId":"80","endLine":11,"endColumn":7},{"ruleId":"77","severity":1,"message":"81","line":78,"column":7,"nodeType":"79","messageId":"80","endLine":78,"endColumn":19},{"ruleId":"73","replacedBy":"82"},{"ruleId":"75","replacedBy":"83"},{"ruleId":"77","severity":1,"message":"84","line":6,"column":26,"nodeType":"79","messageId":"80","endLine":6,"endColumn":37},{"ruleId":"77","severity":1,"message":"81","line":72,"column":7,"nodeType":"79","messageId":"80","endLine":72,"endColumn":19},{"ruleId":"77","severity":1,"message":"85","line":104,"column":9,"nodeType":"79","messageId":"80","endLine":104,"endColumn":26},{"ruleId":"77","severity":1,"message":"86","line":112,"column":9,"nodeType":"79","messageId":"80","endLine":112,"endColumn":29},{"ruleId":"77","severity":1,"message":"87","line":80,"column":9,"nodeType":"79","messageId":"80","endLine":80,"endColumn":33},"no-native-reassign",["88"],"no-negated-in-lhs",["89"],"no-unused-vars","'List' is defined but never used.","Identifier","unusedVar","'fetchReducer' is assigned a value but never used.",["88"],["89"],"'extendTheme' is defined but never used.","'handleChangeValue' is assigned a value but never used.","'handleBuyButtonClick' is assigned a value but never used.","'handleConnectButtonClick' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]